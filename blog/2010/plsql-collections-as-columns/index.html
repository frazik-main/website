<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Storing Collections in Database Columns | Frazik </title> <meta name="author" content="Frazik Content Knitting and Lead Alchemy"> <meta name="description" content="Demonstrates how to store collections in database columns using Oracle's VARRAY."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/data_array.svg?a67830f68c3523b294fc45d8e9b8773d"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://frazik-main.github.io/blog/2010/plsql-collections-as-columns/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="//"> Frazik </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Storing Collections in Database Columns</h1> <p class="post-meta"> Created in September 06, 2010 </p> <p class="post-tags"> <a href="//blog/2010"> <i class="fa-solid fa-calendar fa-sm"></i> 2010 </a>   ·   <a href="//blog/tag/oracle"> <i class="fa-solid fa-hashtag fa-sm"></i> oracle,</a>   <a href="//blog/tag/plsql"> <i class="fa-solid fa-hashtag fa-sm"></i> plsql,</a>   <a href="//blog/tag/database"> <i class="fa-solid fa-hashtag fa-sm"></i> database,</a>   <a href="//blog/tag/collections"> <i class="fa-solid fa-hashtag fa-sm"></i> collections,</a>   <a href="//blog/tag/varray"> <i class="fa-solid fa-hashtag fa-sm"></i> varray,</a>   <a href="//blog/tag/nested"> <i class="fa-solid fa-hashtag fa-sm"></i> nested</a>   <a href="//blog/tag/table"> <i class="fa-solid fa-hashtag fa-sm"></i> table</a>   ·   <a href="//blog/category/database-design"> <i class="fa-solid fa-tag fa-sm"></i> database-design</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>This post demonstrates how to store collections in database columns within a relational table. This technique is useful for persisting collection data without creating additional detail tables. While common in object databases like Google App Engine Bigtable, this approach is also applicable to relational databases.</p> <h3 id="simple-example">Simple Example</h3> <p>This example uses a <code class="language-plaintext highlighter-rouge">VARRAY</code> (you can also use a nested table � see <a href="http://codingwithpassion.blogspot.com/2010/09/oracle-plsql-collections.html" rel="external nofollow noopener" target="_blank">this article</a> about PL/SQL collections) as a column in a relational table.</p> <p>First, a schema-level collection type <code class="language-plaintext highlighter-rouge">varchar_collection_t</code> is declared, capable of holding up to four <code class="language-plaintext highlighter-rouge">VARCHAR2</code> elements. Then, a table <code class="language-plaintext highlighter-rouge">animes</code> is created with a column <code class="language-plaintext highlighter-rouge">characters</code> of this collection type. Finally, a collection is populated and inserted into the <code class="language-plaintext highlighter-rouge">animes</code> table.</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TYPE</span> <span class="n">varchar_collection_t</span> <span class="k">IS</span> <span class="n">VARRAY</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="k">OF</span> <span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="o">/</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">animes</span> <span class="p">(</span>
    <span class="n">name</span> <span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
    <span class="n">characters</span> <span class="n">varchar_collection_t</span>
<span class="p">);</span>

<span class="k">DECLARE</span>
    <span class="n">anime_characters</span> <span class="n">varchar_collection_t</span> <span class="p">:</span><span class="o">=</span> <span class="n">varchar_collection_t</span><span class="p">();</span>
<span class="k">BEGIN</span>
    <span class="n">anime_characters</span><span class="p">.</span><span class="n">EXTEND</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

    <span class="n">anime_characters</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">'Satsuki'</span><span class="p">;</span>
    <span class="n">anime_characters</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">'Mei'</span><span class="p">;</span>
    <span class="n">anime_characters</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">'Totoro'</span><span class="p">;</span>
    <span class="n">anime_characters</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">'Kanta'</span><span class="p">;</span>

    <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">animes</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">characters</span><span class="p">)</span>
    <span class="k">VALUES</span> <span class="p">(</span><span class="s1">'My Neighbor Totoro'</span><span class="p">,</span> <span class="n">anime_characters</span><span class="p">);</span>

<span class="k">END</span><span class="p">;</span>
<span class="o">/</span>
</code></pre></div></div> <p>As shown, a simple <code class="language-plaintext highlighter-rouge">INSERT</code> statement is used to insert the collection into the table. <code class="language-plaintext highlighter-rouge">VARRAY</code> columns store collection data inline (similar to comma-separated values), while nested tables create a separate database table behind the scenes. Oracle recommends <code class="language-plaintext highlighter-rouge">VARRAY</code> for smaller arrays and nested tables for larger ones.</p> <p>One important note: you cannot directly manipulate data within a stored collection. You need to use <code class="language-plaintext highlighter-rouge">CAST</code> and <code class="language-plaintext highlighter-rouge">TABLE</code> syntax. This example shows how to filter using data from the collection:</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">animes</span> <span class="n">a</span>
<span class="k">WHERE</span> <span class="s1">'Mei'</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">characters</span><span class="p">));</span>
</code></pre></div></div> <p>Notice the use of the <code class="language-plaintext highlighter-rouge">TABLE</code> syntax. Even with only one row in the table, this demonstrates the concept effectively.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2010/java-template-method-pattern/">Template Method Design Pattern in Java</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2010/java-strategy-design-pattern/">Strategy Pattern in Java</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2010/javascript-jquery-trigger/">Custom Events in jQuery - A Powerful Technique</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2010/dynamic-typing-plsql/">Using PL/SQL's ANY Types for Dynamic Typing</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2010/plsq-cut-down-round-trips/">Using PL/SQL Collections to Optimize Data Retrieval</a> </li> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2025 Frazik Content Knitting and Lead Alchemy. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>